# Evidence: S01

## Segment
- ID: S01
- Deliverable(s): D01
- Date: 2026-02-12

## Code Changes
- Files changed:
  - `specs/manifest/agent-manifest-spec-v0.1.yaml`
  - `specs/manifest/examples/simple-tool-agent.yaml`
  - `specs/manifest/examples/multi-capability-agent.yaml`
  - `specs/manifest/examples/pipeline-agent.yaml`
  - `docs/spec/SPEC.md`
  - `docs/spec/a2a-mapping.md`
  - `docs/spec/mcp-mapping.md`
  - `tools/manifest/validate_manifest.py`
  - `tests/manifest/test_schema_valid_examples.py`
  - `tests/manifest/test_schema_invalid_examples.py`
  - `tests/manifest/fixtures/invalid/missing-identity-version.yaml`
  - `tests/manifest/fixtures/invalid/invalid-semver.yaml`
  - `tests/manifest/fixtures/invalid/privileged-interface-missing-permissions.yaml`
  - `tests/manifest/fixtures/invalid/missing-trust-policy.yaml`
  - `tests/manifest/fixtures/invalid/inline-secret-value.yaml`
  - `tests/manifest/fixtures/invalid/invalid-budget-thresholds.yaml`
- Summary:
  - Implemented canonical AgentHub manifest schema v0.1 (JSON Schema 2020-12) with strict section modeling for identity/capabilities/requirements/interfaces/trust/composition/runtime/provenance.
  - Added 3 valid example manifests and validator CLI (`agenthub manifest validate <path>` compatibility via script argument form).
  - Added negative fixtures and automated tests for valid/invalid schema behavior and CLI return codes.
  - Added protocol mapping documentation for A2A and MCP with field-by-field mapping plus unsupported-field policy.

## Artifact Checklist
- [x] `specs/manifest/agent-manifest-spec-v0.1.yaml`
- [x] `specs/manifest/examples/simple-tool-agent.yaml`
- [x] `specs/manifest/examples/multi-capability-agent.yaml`
- [x] `specs/manifest/examples/pipeline-agent.yaml`
- [x] `docs/spec/SPEC.md`
- [x] `docs/spec/a2a-mapping.md`
- [x] `docs/spec/mcp-mapping.md`
- [x] Validator command implemented

## Test Commands Executed
```bash
python3 -m pip install -U pip
python3 -m pip install pyyaml jsonschema pytest
python3 tools/manifest/validate_manifest.py specs/manifest/examples/simple-tool-agent.yaml
python3 tools/manifest/validate_manifest.py specs/manifest/examples/multi-capability-agent.yaml
python3 tools/manifest/validate_manifest.py specs/manifest/examples/pipeline-agent.yaml
pytest tests/manifest -q
python3 tools/manifest/validate_manifest.py tests/manifest/fixtures/invalid/invalid-semver.yaml
```

## Test Results
- Passed:
  - `python3 tools/manifest/validate_manifest.py specs/manifest/examples/simple-tool-agent.yaml` -> `VALID`
  - `python3 tools/manifest/validate_manifest.py specs/manifest/examples/multi-capability-agent.yaml` -> `VALID`
  - `python3 tools/manifest/validate_manifest.py specs/manifest/examples/pipeline-agent.yaml` -> `VALID`
  - `pytest tests/manifest -q` -> `9 passed in 0.49s`
  - Invalid check command correctly returned `exit_code=1`
- Failed:
  - None
- Skipped:
  - None

## Verification Evidence
- Schema validation evidence:
  - All 3 canonical manifests validate with zero errors through the CLI validator.
  - Automated schema tests pass (`tests/manifest/test_schema_valid_examples.py`).
- Invalid fixture failures (expected):
  - 6 invalid fixtures fail validation (required field, semver, privileged permissions, trust policy, inline secret, budget thresholds).
  - Automated invalid tests pass (`tests/manifest/test_schema_invalid_examples.py`), including CLI non-zero assertion.
- A2A mapping validation:
  - `docs/spec/a2a-mapping.md` includes explicit forward and reverse mapping tables plus unsupported-field behavior.
- MCP mapping validation:
  - `docs/spec/mcp-mapping.md` includes field mapping and schema translation rules (`inline` vs `$ref_uri` projection).
- Logs/screenshots:
  - Command log captured in this evidence file; no screenshots required for S01.

## Security Validation
- [x] No inline secret values in examples
- [x] Permission scope declarations present where required
- [x] Guardrail metadata present in trust section

## Known Risks
- Schema is intentionally strict in v0.1 (fixed budget threshold constants, constrained enum sets); future segments may need compatibility strategy for controlled expansion.
- Inline-secret detection uses deterministic key-pattern checks; additional heuristics may be needed if partners provide unconventional key names.

## Next Segment Handoff
- Recommended next segment: S02
- Required context for next segment:
  - finalized manifest schema
  - trust fields to be used in ranking
  - capability shape and compatibility semantics

## Mandatory Confirmation
- [x] `docs/agenthub-master-plan-v1.2.docx` updated
- [x] `docs/DELIVERABLE_LOG.md` updated
