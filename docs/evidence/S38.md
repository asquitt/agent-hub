# Evidence

## Segment
- ID: S38
- Deliverable(s): Eval tier-2 safety
- Date: 2026-02-12

## Code Changes
- Files changed:
  - `src/eval/runner.py`
  - `tools/eval/agenthub_eval.py`
  - `tests/eval/test_eval_tier2_safety.py`
  - `tests/eval/test_eval_cli.py`
  - `docs/eval/EVAL_FRAMEWORK.md`
  - `docs/eval/TIER2_SAFETY_S38.md`
  - `docs/session-packets/S38.md`
- Summary:
  - Added tier-2 safety eval harness for prompt-injection, secret-exfiltration, and jailbreak vectors.
  - Added deterministic safety-case corpus with structured findings and attack/false-positive/false-negative metrics.
  - Added tier-aware eval entrypoint support (`tier1`, `tier2`, `all`) and CLI flag `--tier`.
  - Added S38 safety regression tests and CLI tests validating tier-2 execution path.

## Test Commands Executed
```bash
pytest tests/eval/test_eval_runner.py tests/eval/test_eval_tier2_safety.py tests/eval/test_eval_cli.py -q
pytest -q
```

## Test Results
- Passed:
  - `6 passed in 0.19s` (eval/CLI targeted)
  - `136 passed in 7.74s` (full regression)
- Failed: `0`
- Skipped: `0`

## Verification Evidence
- Safety boundary coverage:
  - Tier-2 suite blocks injection/exfiltration/jailbreak adversarial prompts and allows benign prompts in regression corpus.
- Structured persistence:
  - Tier-2 outputs include `findings`, `safety_category_results`, and false-positive/false-negative metrics in stored eval records.
- Compatibility:
  - Tier-1 eval behavior remains unchanged by default CLI invocation.

## Known Risks
- Tier-2 harness currently uses deterministic rule-based detectors; broader model-driven adversarial coverage remains future scope.
- Safety corpus is intentionally compact and should expand with production incident-derived prompts.

## Next Segment Handoff
- Recommended next segment: `S39` (Eval tier-3 outcomes)
- Required context for next segment:
  - Build outcome/KPI eval suites on top of the tiered eval runner introduced in S38.

## Mandatory Confirmation
- [x] `docs/agenthub-master-plan-v1.2.docx` updated
- [x] `docs/DELIVERABLE_LOG.md` updated
