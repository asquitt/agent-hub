schema_version: "0.1"
identity:
  id: bad-secret-agent
  name: Bad Secret Agent
  version: 1.0.0
  description: Inline secret values should fail deterministic policy validation.
  owner: platform
  type: tool
requirements:
  permissions:
    - tools.invoke
  secrets:
    - id: openai
      secret_ref: env://OPENAI_API_KEY
capabilities:
  - id: call-model
    name: Call Model
    category: action
    description: Demonstrates invalid inline token that should be rejected.
    input_schema:
      type: object
      properties:
        prompt:
          type: string
    output_schema:
      type: object
      properties:
        text:
          type: string
    protocols: [HTTP]
    idempotency_key_required: true
    side_effect_level: low
    auth_token: sk-test-123456
interfaces:
  - name: http
    protocol: HTTP
    endpoint: https://example.com/http
    auth: signed_jwt
    privileged: false
trust:
  minimum_trust_score: 0.8
  allowed_trust_sources: [first_party]
  policy:
    injection_protection: strict
    pii_handling: deny
    data_retention_days: 1
    high_risk_approval_required: true
  budget_guardrails:
    soft_alert_pct: 80
    reauthorization_pct: 100
    hard_stop_pct: 120
  credential_policy:
    short_lived_credentials: true
    max_ttl_minutes: 30
runtime:
  execution_mode: deterministic_workflow
  sandbox: container
  max_retries: 1
  timeout_seconds: 10
  idempotency_required: true
  replay_safe: true
  observability:
    log_privileged_actions: true
    emit_cost_metrics: true
    emit_latency_metrics: true
