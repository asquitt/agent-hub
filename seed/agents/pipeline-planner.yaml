schema_version: "0.1"
identity:
  id: pipeline-planner
  name: AgentHub Pipeline Planner
  version: 0.1.0
  description: Recommends optimal multi-agent pipelines using discovery and trust constraints.
  owner: agenthub
  type: orchestrator
capabilities:
  - id: plan-pipeline
    name: Plan Pipeline
    category: orchestration
    description: Uses discovery API outputs to propose ranked agent execution plans.
    input_schema:
      type: object
      properties:
        task:
          type: string
        max_cost_usd:
          type: number
      required: [task]
      additionalProperties: false
    output_schema:
      type: object
      properties:
        recommended_agents:
          type: array
          items:
            type: string
      required: [recommended_agents]
      additionalProperties: false
    protocols: [MCP, A2A]
    permissions: [capabilities.search]
    idempotency_key_required: false
    side_effect_level: none
interfaces:
  - name: mcp
    protocol: MCP
    endpoint: https://example.local/mcp/pipeline-planner
    auth: signed_jwt
    privileged: false
trust:
  minimum_trust_score: 0.75
  allowed_trust_sources: [first_party]
  policy:
    injection_protection: strict
    pii_handling: deny
    data_retention_days: 7
    high_risk_approval_required: true
  budget_guardrails:
    soft_alert_pct: 80
    reauthorization_pct: 100
    hard_stop_pct: 120
  credential_policy:
    short_lived_credentials: true
    max_ttl_minutes: 60
runtime:
  execution_mode: deterministic_workflow
  sandbox: container
  max_retries: 2
  timeout_seconds: 30
  idempotency_required: true
  replay_safe: true
  observability:
    log_privileged_actions: true
    emit_cost_metrics: true
    emit_latency_metrics: true
